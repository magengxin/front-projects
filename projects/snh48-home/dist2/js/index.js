"use strict";(function(){var e=$(".loading-value span");S.preload(["image/section1.jpg","image/sprite.png"],function(e){console.log("load resource count:",e),$(".loader").hide(),$("body").removeClass("loading")},function(t){var t=t&&t.toFixed(0);e.width(t+"%")})}).call(void 0),$(function(){function e(){$(".to-qq").attr("href",r.url)}function t(e){if(!d){if(s.activeIndex<3)return f=!0;if(f)return void setTimeout(function(){f=!1},l);if(!e)return u?(console.log("退出版权信息"),f=!0,u=!1,s.unlockSwipes(),void n(!1)):u=!1;if(u)return u=!0;u=!0,console.log("进入版权信息"),s.lockSwipes(),n(!0),setTimeout(function(){d=!1},l)}}function n(e){e?$(".view-index").addClass("show-footer"):$(".view-index").removeClass("show-footer")}function a(){new Swiper(".snapshots",{speed:400,spaceBetween:20,slidesPerGroup:4,slidesPerView:4,loop:!0,mousewheelControl:!1,prevButton:".icon-s-arrow-left",nextButton:".icon-s-arrow-right"})}function o(e){e.parent().find("audio")[0].pause(),e.hide(),e.parent().find(".a-off").css("display","inline-block")}function i(e){var t=Date.now();e.css("pointer-events","none");var n=setInterval(function(){var a=Date.now(),o=((a-t)/1e3).toFixed(0),i=60-o;if(i<0)return e.css("pointer-events","all"),e.html("获取验证码"),clearInterval(n);e.html(i)},1e3)}var r={url:"//shang.qq.com/wpa/qunwpa?idkey=594e78830030b5c8d1b1a34fd11f753e4ed6ceb903332b6a3f55c01671428e04",ewm:"http://snh48.thedream.cc/dcms_upfiles/32exLwHYKaXOSpfv1495005531.png",number:"340920444",other:"http://snh48.thedream.cc/dcms_upfiles/ZwqDGMojViHCetcP1495005535.png"};!function(){$.ajax({type:"jsonp",method:"GET",url:"http://dcms.thedream.cc/snh48/qq_ewm",dataType:"jsonp",success:function(t){"0"==t.ret_code&&(r=t.data,e())},err:function(e){console.log(e)}})}();var c=$(".content-box");$(".tab").on("click",function(e){var t=$(e.currentTarget);t.addClass("active").siblings().removeClass("active");var n=t.attr("data-tag");n&&c.attr("data-tag",n)});var s;!function(){s=new Swiper(".swiper",{loop:!1,direction:"vertical",speed:400,lazyLoading:!0,grabCursor:!0,mousewheelControl:!0,keyboardControl:!1,simulateTouch:!1,pagination:".nav-tabs",bulletClass:"icon-tab",bulletActiveClass:"active",paginationBulletRender:function(e,t,n){var a="";return 0==t&&(a='<div class="icon-star first"></div>'),'<a href="javascript:" class="tab '+n+" "+n+"-"+t+'-hover">'+a+'<div class="icon-star"></div></a>'},paginationClickable:!0}),window.mySwiper=s}();var l=600,d=!1,u=!1,f=!0;$(".swiper").on("mousewheel",function(e){var n=!0;e.deltaY>0&&(n=!1),t(n)}),$("document").keypress(function(e){console.log(e);var n=!0,a=e.keyCode?e.keyCode:e.which;if(40==a)var n=!0;else 38==a&&(n=!1);console.log(a),t(n)}),function(){$(".news-banners").length&&new Swiper(".news-banners",{speed:400,spaceBetween:0,autoplay:3e3,loop:!0,mousewheelControl:!0,pagination:".news-banner-page"})}();var v=0;$(".kefu p").each(function(e,t){console.log($(t).outerWidth()),v+=$(t).outerWidth()});console.log(v),function(){new Swiper(".kefu",{speed:1e4,width:v+40,spaceBetween:0,autoplay:1,loop:!0,mousewheelControl:!0})}();var p=$(".videos"),h=$(".dialog-up-video");h.find(".mask").on("click",function(){h.hide().find(".video").empty()}),p.on("click",".video",function(){var e=$(this),t=e.attr("data-video");h.show().find(".video").html(t)});var g=$(".snapshots"),m=$(".dialog-snapshots");m.find(".mask").on("click",function(){m.hide().find(".img").attr("src","javascript:")}),g.on("click",".image",function(){var e=$(this),t=e.attr("data-src");m.show().find("img").attr("src",t)});var w=$(".up-videos");$(".btn-up-video").click(function(){w.attr("data-tag","v")}),$(".btn-snapshots").click(function(){setTimeout(a,0),w.attr("data-tag","s")}),function(){new Swiper(".wutu",{speed:400,spaceBetween:0,autoplay:3e3,loop:!0,mousewheelControl:!1,prevButton:".section4 .icon-arrow-left",nextButton:".section4 .icon-arrow-right"})}();for(var b=[],k=$('#character [class^="caharcter_"]'),y=k.length,C=0;C<y;C++){var x=k.eq(C),j={r:x.find(".character_img").val(),k:x.find(".ecy_img").val(),name:x.find(".name").val(),audio:x.find(".audio").val(),nickname:x.find(".nickname").val(),xuexing:x.find(".xuexing").val(),birthday:x.find(".birthday").val(),height:x.find(".height").val(),xingzuo:x.find(".xingzuo").val(),techang:x.find(".techang").val(),hobby:x.find(".hobby").val(),team:x.find(".team").val(),jineng:function(e){var t=e.split("\n"),n=[];return t.forEach(function(e,t){e=e.split("|"),n.push({icon:e[0],desc:e[2]})}),n}(x.find(".jineng").val())};b.push(j)}var S,B=$(".info-board");!function(){var e=$(".girls-board .wrapper"),t=6;($(window).outerWidth()<1440||$(window).outerHeight()<800)&&(t=5);var n=$(".girls-board .tab img");S=new Swiper(".girls",{speed:400,spaceBetween:300,loop:!1,mousewheelControl:!1,prevButton:".girls-board .icon-arrow-left",nextButton:".girls-board .icon-arrow-right",pagination:".girls-board .wrapper",bulletClass:"tab",bulletActiveClass:"active",preloadImages:!1,lazyLoading:!0,onLazyImageReady:function(e,t,n){},onInit:function(){B.html(T.table({girl:b[0]}))},paginationBulletRender:function(e,t,a){return'<a href="javascript:" class="tab '+a+'"><img src="'+n.eq(t).attr("src")+'"/></a>'},paginationClickable:!0,onSlideChangeStart:function(n){var a=n.realIndex+1;B.html(T.table({girl:b[n.realIndex]}));var o=e.width(),i=e[0].scrollLeft,r=$(".girls-board .tab").outerWidth()+t,c=r*(a-1);c<i?e.animate({scrollLeft:c},200):i+o<c+20&&e.animate({scrollLeft:c+r-o},200)}}),$(".icon-go-down").click(function(){s.slideNext()})}(),$newsContent=$(".news-content"),$(".news-tabs .tab").hover(function(e){var t=$(this),n=t.attr("data-tag");n&&(t.addClass("active").siblings().removeClass("active"),$newsContent.attr("data-tag",n))}),$(".icon-turn").click(function(e){$(this).parent().find(".swiper-slide-active .image").toggleClass("active")}),B.on("mouseover",".skill",function(e){var t=$(e.currentTarget);t.addClass("active").siblings().removeClass("active"),desc=t.attr("data-desc"),desc&&t.parent().find(".desc").html(desc)});var _=$(".icon-play"),q=$(".dialog-video"),I=$(".dialog-video .mask"),L=$(".dialog-video video"),z=$(".icon-btn-call"),D=$(".dialog-commit"),G=(D.find(".submit"),$(".dialog-commit .icon-close")),P=L[0];_.click(function(){q.show();var e=P.play();e&&e.then(function(){console.log("play")})}),z.click(function(e){D.show()}),G.click(function(e){D.hide()}),I.click(function(e){q.hide();var t=P.pause();t&&t.then(function(){console.log("pause")})}),B.on("click",".a-off",function(e){var t=$(e.currentTarget),n=t.parent().find("audio")[0];n.play();var a=t.next(".a-on");$(n).on("ended",function(){o(a)}),t.hide(),a.css("display","inline-block")}),B.on("click",".a-on",function(e){o($(e.currentTarget))});var W=$(".ercode"),E=!1;W.click(function(){if(E)return toast("正在发送验证码，请稍后");var e=$(this),t=$(".content-box").attr("data-tag");if(!t)return toast("数据错误");var n=$(".form."+t),a=n.find(".phone"),o=a.val().trim();if(!o||11!=o.length)return toast("请输入手机号");E=!0,e.html("发送中"),$.ajax({type:"jsonp",method:"GET",url:"http://dcms.thedream.cc/snh48/code/send?cell="+o,dataType:"jsonp",success:function(t){if(E=!1,"0"!==t.ret_code)return e.html("发送验证码"),toast(t.ret_msg);i(e)},err:function(t){return E=!1,console.log(t),e.html("发送验证码"),toast(t.ret_msg)}})});var H=$(".btn.submit"),R=!1;H.click(function(){if(R)return toast("正在发送中，请稍后");var e=($(this),$(".content-box").attr("data-tag"));if(!e)return toast("数据错误");var t=$(".dialog-commit"),n=t.find(".phone"),a=n.val().trim();if(!a||11!=a.length)return toast("请输入手机号");var o=t.find(".code").val().trim();if(!o||6!=o.length)return toast("请输入验证码");R=!0,$.ajax({type:"jsonp",method:"POST",url:"http://dcms.thedream.cc/snh48/code/confirm",data:{cell:a,code:o,os:"android"==e?1:2},dataType:"jsonp",success:function(e){if(R=!1,"0"!==e.ret_code)return toast(e.ret_msg);D.hide(),toast("申请成功")},err:function(e){R=!1,console.log(e)}})}),$(".wait").click(function(e){e.preventDefault(),toast("敬请期待")})});